{% extends "base.html" %}
{% load static %}

{% block content %}
<section class="seccion">
  <h2>Blog</h2>
  {% for post in posts %}
    <a href="{% url 'detalle_post' post.pk %}" class="post-link">
      <div class="proyecto">
        <p class="post-fecha">{{ post.fecha_publicacion|date:"d M Y" }}</p>
        <h3>{{ post.titulo }}</h3>
        <p>{{ post.contenido|truncatechars:150 }}</p>

        {% if post.archivos.first %}
          {% with post.archivos.first.archivo.url as archivo_url %}
            {% if archivo_url|lower|slice:"-4:" == ".jpg" or archivo_url|lower|slice:"-4:" == ".png" or archivo_url|lower|slice:"-5:" == ".jpeg" or archivo_url|lower|slice:"-4:" == ".gif" %}
              <div style="width: 280px; height: 180px; overflow: hidden; border-radius: 8px;">
                <img src="{{ archivo_url }}" class="preview-img">
              </div>
            {% endif %}
          {% endwith %}
        {% endif %}
      </div>
    </a>
  {% empty %}
    <p>No hay entradas todav√≠a.</p>
  {% endfor %}
</section>
{% endblock %}
